<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cancel Ticket | MyBus</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,"Helvetica Neue",Arial;
      background:linear-gradient(to right,#eef2f3,#dfe9f3);
      min-height:100vh; display:flex; flex-direction:column; color:#333;
    }

    /* NAV */
    .logo{display:flex;align-items:center}
    .logo img{width:40px;height:20px;margin-right:8px;object-fit:contain}
    .logo a{color:#fff;text-decoration:none;font-size:24px;font-weight:700}

    nav{
      background:linear-gradient(to right,#00c6ff,#0072ff);
      display:flex;justify-content:space-between;align-items:center;
      padding:0 20px;height:60px;position:sticky;top:0;z-index:1000;transition:box-shadow .2s ease;
    }
    nav.scrolled{ box-shadow:0 6px 20px rgba(0,0,0,.15); }

    .nav-links{display:flex;gap:10px}
    .nav-links a{
      color:#fff;text-decoration:none;padding:12px 18px;font-weight:500;border-radius:8px;
      transition:background .25s ease, transform .15s ease;
    }
    .nav-links a:hover{ background:rgba(255,255,255,.2); transform:translateY(-1px); }

    .hamburger-menu{display:none;flex-direction:column;width:30px;height:25px;cursor:pointer;z-index:200}
    .hamburger-menu .bar{height:3px;background:#fff;transition:.3s}
    .hidden-checkbox{display:none}

    /* CARD */
    main{flex:1;display:flex;justify-content:center;align-items:flex-start;padding:40px 16px}
    .card{
      width:100%;max-width:520px;background:#fff;border:1px solid #eaeef3;border-radius:14px;
      box-shadow:0 8px 22px rgba(0,0,0,.08); padding:26px; text-align:center; animation:fadeIn .5s ease both;
    }
    @keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:none}}
    .card h3{color:#0072ff;margin-bottom:18px}

    label{display:block;text-align:left;margin:10px 0 6px;font-weight:600}
    input{
      width:100%;padding:12px;border:1px solid #d1d5db;border-radius:10px;font-size:15px;outline:none;
      transition:border-color .2s, box-shadow .2s;
    }
    input:focus{border-color:#0072ff;box-shadow:0 0 0 4px rgba(0,114,255,.15)}
    .row{display:flex;align-items:center;gap:8px;margin:2px 0 6px;justify-content:flex-start}
    .row label{margin:0;font-weight:500}

    .btn{
      width:100%;padding:12px 14px;border:none;border-radius:12px;font-weight:700;font-size:16px;cursor:pointer;
      color:#fff;background:linear-gradient(135deg,#ff4b5c,#ff6b81); box-shadow:0 8px 20px rgba(255,75,92,.28);
      transition:transform .18s, box-shadow .25s, background .25s; position:relative; overflow:hidden; margin-top:8px;
    }
    .btn:hover{ transform:translateY(-2px) scale(1.01); box-shadow:0 12px 28px rgba(255,75,92,.36) }
    .btn:active{ transform:scale(.98) }
    .btn:disabled{ opacity:.75; cursor:not-allowed }

    /* ripple */
    .ripple{position:absolute;border-radius:50%;background:rgba(255,255,255,.35);transform:translate(-50%,-50%);animation:rip .6s ease-out}
    @keyframes rip{from{opacity:.6;transform:scale(0)}to{opacity:0;transform:scale(3.2)}}

    footer{background:#1a252f;text-align:center;color:#ccc;padding:16px 0;font-size:14px;margin-top:auto}
    footer small{opacity:.9}

    /* TOAST */
    #toast{
      position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(20px);
      background:#111827;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 12px 24px rgba(0,0,0,.25);
      display:none;z-index:2000;font-size:14px;
    }

    /* Responsive nav */
    @media (max-width:768px){
      .hamburger-menu{display:flex}
      .nav-links{
        position:fixed; inset:0; height:100vh; background:rgba(0,114,255,.95);
        flex-direction:column; justify-content:center; align-items:center;
        transform:translateX(-100%); transition:transform .3s; z-index:100;
      }
      .nav-links a{font-size:20px;padding:15px;width:100%;text-align:center}
      .hidden-checkbox:checked ~ .nav-links{ transform:translateX(0) }
      .hidden-checkbox:checked ~ .hamburger-menu .bar:nth-child(2){opacity:0}
      .hidden-checkbox:checked ~ .hamburger-menu .bar:nth-child(1){transform:translateY(8px) rotate(45deg)}
      .hidden-checkbox:checked ~ .hamburger-menu .bar:nth-child(3){transform:translateY(-8px) rotate(-45deg)}
    }
  </style>
</head>

<body>
  <!-- NAV -->
  <nav id="navbar">
    <div class="logo">
      <img src="Images/MyBus.png" alt="MyBus Logo"><a href="#">MyBus</a>
    </div>

    <input type="checkbox" id="menu-toggle" class="hidden-checkbox">
    <label for="menu-toggle" class="hamburger-menu" aria-label="Toggle navigation">
      <div class="bar"></div><div class="bar"></div><div class="bar"></div>
    </label>

    <div class="nav-links">
      <a href="index.html"><i class="fa fa-home"></i> Home</a>
      <a href="MyBooking.html"><i class="fa fa-ticket"></i> Booking</a>
      <a href="offers.html"><i class="fa fa-gift"></i> Offers</a>
      <a href="Needhelp.html"><i class="fa fa-life-ring"></i> Need Help?</a>
      <a href="login.html"><i class="fa fa-user"></i> Login/SignUp</a>
    </div>
  </nav>

  <!-- FORM -->
  <main>
    <div class="card">
      <h3><i class="fa fa-times-circle"></i> Cancel Your Ticket</h3>

      <form id="cancelForm" autocomplete="off" novalidate>
        <label for="booking-id">Booking ID</label>
        <input type="text" id="booking-id" placeholder="e.g. MB12345" required>

        <label for="email">Email Address</label>
        <input type="email" id="email" placeholder="you@example.com" required>

        <div class="row">
          <input type="checkbox" id="rememberEmail">
          <label for="rememberEmail">Remember email</label>
        </div>

        <button type="submit" class="btn" id="cancelBtn"><i class="fa fa-ban"></i> Cancel Ticket</button>
      </form>
    </div>
  </main>

  <footer>&copy; <span id="year"></span> MyBus India Pvt Ltd. All Rights Reserved</footer>

  <!-- Toast -->
  <div id="toast" role="status" aria-live="polite"></div>

  <script>
    // Year + sticky nav shadow
    document.getElementById('year').textContent = new Date().getFullYear();
    const navbar = document.getElementById('navbar');
    addEventListener('scroll', () => navbar.classList.toggle('scrolled', scrollY > 6), { passive:true });

    // Close mobile menu on link click
    const menuToggle = document.getElementById('menu-toggle');
    document.querySelectorAll('.nav-links a').forEach(a => a.addEventListener('click', () => {
      if (menuToggle.checked) menuToggle.checked = false;
    }));

    // Toast
    const toastEl = document.getElementById('toast'); let toastTimer;
    function toast(msg, ms=1600){
      toastEl.textContent = msg;
      toastEl.style.display = 'block';
      toastEl.style.opacity = '0';
      toastEl.style.transform = 'translateX(-50%) translateY(20px)';
      requestAnimationFrame(()=>{
        toastEl.style.transition='opacity .2s ease, transform .2s ease';
        toastEl.style.opacity='1';
        toastEl.style.transform='translateX(-50%) translateY(0)';
      });
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>{
        toastEl.style.opacity='0';
        toastEl.style.transform='translateX(-50%) translateY(20px)';
        setTimeout(()=> toastEl.style.display='none', 200);
      }, ms);
    }

    // Input helpers
    function markInvalid(el){ el.style.borderColor='#ef4444'; el.style.boxShadow='0 0 0 3px rgba(239,68,68,.15)'; }
    function clearMark(el){ el.style.borderColor='#d1d5db'; el.style.boxShadow='none'; }

    // Validation
    const isEmail = v => /\S+@\S+\.\S+/.test(v);
    const isBookingId = v => /^[A-Za-z0-9]{6,14}$/.test(v); // simple alphanumeric 6–14

    // Remember email
    const REMEMBER_KEY = 'mybus_cancel_email';
    const emailEl = document.getElementById('email');
    const rememberEl = document.getElementById('rememberEmail');
    try {
      const saved = localStorage.getItem(REMEMBER_KEY);
      if (saved) { emailEl.value = saved; rememberEl.checked = true; }
    } catch {}

    // Ripple on button
    document.getElementById('cancelBtn').addEventListener('click', function(e){
      const d = Math.max(this.clientWidth, this.clientHeight);
      const r = d/2;
      const circle = document.createElement('span');
      circle.className='ripple';
      circle.style.width=circle.style.height=`${d}px`;
      const rect = this.getBoundingClientRect();
      circle.style.left = `${e.clientX - rect.left - r}px`;
      circle.style.top  = `${e.clientY - rect.top  - r}px`;
      const prev = this.querySelector('.ripple'); if (prev) prev.remove();
      this.appendChild(circle);
      setTimeout(()=> circle.remove(), 600);
    });

    // Live clear highlights
    const idEl = document.getElementById('booking-id');
    [idEl, emailEl].forEach(el => el.addEventListener('input', ()=> clearMark(el)));

    // Submit
    const form = document.getElementById('cancelForm');
    const btn  = document.getElementById('cancelBtn');

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      const id = idEl.value.trim();
      const em = emailEl.value.trim();

      let invalid = false;
      if (!isBookingId(id)) { toast('Enter a valid Booking ID (6–14 letters/numbers)'); markInvalid(idEl); invalid = true; }
      if (!isEmail(em))     { toast('Please enter a valid email'); markInvalid(emailEl); invalid = true; }

      if (invalid) return;

      try {
        if (rememberEl.checked) localStorage.setItem(REMEMBER_KEY, em);
        else localStorage.removeItem(REMEMBER_KEY);
      } catch {}

      // Simulate processing
      btn.disabled = true;
      toast('Cancelling your ticket…');
      setTimeout(()=>{
        toast('Ticket cancelled successfully ✅');
        form.reset();
        btn.disabled = false;
      }, 1100);
    });
  </script>
</body>
</html>
